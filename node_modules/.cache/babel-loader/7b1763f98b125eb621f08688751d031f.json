{"ast":null,"code":"exports.__esModule = true;\nexports.warn = exports.requestAnimationFrame = exports.reducePropsToState = exports.mapStateOnServer = exports.handleClientStateChange = exports.convertReactPropstoHtmlAttributes = undefined;\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n};\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _objectAssign = require(\"object-assign\");\n\nvar _objectAssign2 = _interopRequireDefault(_objectAssign);\n\nvar _HelmetConstants = require(\"./HelmetConstants.js\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nvar encodeSpecialCharacters = function encodeSpecialCharacters(str) {\n  var encode = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n\n  if (encode === false) {\n    return String(str);\n  }\n\n  return String(str).replace(/&/g, \"&amp;\").replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\").replace(/\"/g, \"&quot;\").replace(/'/g, \"&#x27;\");\n};\n\nvar getTitleFromPropsList = function getTitleFromPropsList(propsList) {\n  var innermostTitle = getInnermostProperty(propsList, _HelmetConstants.TAG_NAMES.TITLE);\n  var innermostTemplate = getInnermostProperty(propsList, _HelmetConstants.HELMET_PROPS.TITLE_TEMPLATE);\n\n  if (innermostTemplate && innermostTitle) {\n    // use function arg to avoid need to escape $ characters\n    return innermostTemplate.replace(/%s/g, function () {\n      return innermostTitle;\n    });\n  }\n\n  var innermostDefaultTitle = getInnermostProperty(propsList, _HelmetConstants.HELMET_PROPS.DEFAULT_TITLE);\n  return innermostTitle || innermostDefaultTitle || undefined;\n};\n\nvar getOnChangeClientState = function getOnChangeClientState(propsList) {\n  return getInnermostProperty(propsList, _HelmetConstants.HELMET_PROPS.ON_CHANGE_CLIENT_STATE) || function () {};\n};\n\nvar getAttributesFromPropsList = function getAttributesFromPropsList(tagType, propsList) {\n  return propsList.filter(function (props) {\n    return typeof props[tagType] !== \"undefined\";\n  }).map(function (props) {\n    return props[tagType];\n  }).reduce(function (tagAttrs, current) {\n    return _extends({}, tagAttrs, current);\n  }, {});\n};\n\nvar getBaseTagFromPropsList = function getBaseTagFromPropsList(primaryAttributes, propsList) {\n  return propsList.filter(function (props) {\n    return typeof props[_HelmetConstants.TAG_NAMES.BASE] !== \"undefined\";\n  }).map(function (props) {\n    return props[_HelmetConstants.TAG_NAMES.BASE];\n  }).reverse().reduce(function (innermostBaseTag, tag) {\n    if (!innermostBaseTag.length) {\n      var keys = Object.keys(tag);\n\n      for (var i = 0; i < keys.length; i++) {\n        var attributeKey = keys[i];\n        var lowerCaseAttributeKey = attributeKey.toLowerCase();\n\n        if (primaryAttributes.indexOf(lowerCaseAttributeKey) !== -1 && tag[lowerCaseAttributeKey]) {\n          return innermostBaseTag.concat(tag);\n        }\n      }\n    }\n\n    return innermostBaseTag;\n  }, []);\n};\n\nvar getTagsFromPropsList = function getTagsFromPropsList(tagName, primaryAttributes, propsList) {\n  // Calculate list of tags, giving priority innermost component (end of the propslist)\n  var approvedSeenTags = {};\n  return propsList.filter(function (props) {\n    if (Array.isArray(props[tagName])) {\n      return true;\n    }\n\n    if (typeof props[tagName] !== \"undefined\") {\n      warn(\"Helmet: \" + tagName + \" should be of type \\\"Array\\\". Instead found type \\\"\" + _typeof(props[tagName]) + \"\\\"\");\n    }\n\n    return false;\n  }).map(function (props) {\n    return props[tagName];\n  }).reverse().reduce(function (approvedTags, instanceTags) {\n    var instanceSeenTags = {};\n    instanceTags.filter(function (tag) {\n      var primaryAttributeKey = void 0;\n      var keys = Object.keys(tag);\n\n      for (var i = 0; i < keys.length; i++) {\n        var attributeKey = keys[i];\n        var lowerCaseAttributeKey = attributeKey.toLowerCase(); // Special rule with link tags, since rel and href are both primary tags, rel takes priority\n\n        if (primaryAttributes.indexOf(lowerCaseAttributeKey) !== -1 && !(primaryAttributeKey === _HelmetConstants.TAG_PROPERTIES.REL && tag[primaryAttributeKey].toLowerCase() === \"canonical\") && !(lowerCaseAttributeKey === _HelmetConstants.TAG_PROPERTIES.REL && tag[lowerCaseAttributeKey].toLowerCase() === \"stylesheet\")) {\n          primaryAttributeKey = lowerCaseAttributeKey;\n        } // Special case for innerHTML which doesn't work lowercased\n\n\n        if (primaryAttributes.indexOf(attributeKey) !== -1 && (attributeKey === _HelmetConstants.TAG_PROPERTIES.INNER_HTML || attributeKey === _HelmetConstants.TAG_PROPERTIES.CSS_TEXT || attributeKey === _HelmetConstants.TAG_PROPERTIES.ITEM_PROP)) {\n          primaryAttributeKey = attributeKey;\n        }\n      }\n\n      if (!primaryAttributeKey || !tag[primaryAttributeKey]) {\n        return false;\n      }\n\n      var value = tag[primaryAttributeKey].toLowerCase();\n\n      if (!approvedSeenTags[primaryAttributeKey]) {\n        approvedSeenTags[primaryAttributeKey] = {};\n      }\n\n      if (!instanceSeenTags[primaryAttributeKey]) {\n        instanceSeenTags[primaryAttributeKey] = {};\n      }\n\n      if (!approvedSeenTags[primaryAttributeKey][value]) {\n        instanceSeenTags[primaryAttributeKey][value] = true;\n        return true;\n      }\n\n      return false;\n    }).reverse().forEach(function (tag) {\n      return approvedTags.push(tag);\n    }); // Update seen tags with tags from this instance\n\n    var keys = Object.keys(instanceSeenTags);\n\n    for (var i = 0; i < keys.length; i++) {\n      var attributeKey = keys[i];\n      var tagUnion = (0, _objectAssign2.default)({}, approvedSeenTags[attributeKey], instanceSeenTags[attributeKey]);\n      approvedSeenTags[attributeKey] = tagUnion;\n    }\n\n    return approvedTags;\n  }, []).reverse();\n};\n\nvar getInnermostProperty = function getInnermostProperty(propsList, property) {\n  for (var i = propsList.length - 1; i >= 0; i--) {\n    var props = propsList[i];\n\n    if (props.hasOwnProperty(property)) {\n      return props[property];\n    }\n  }\n\n  return null;\n};\n\nvar reducePropsToState = function reducePropsToState(propsList) {\n  return {\n    baseTag: getBaseTagFromPropsList([_HelmetConstants.TAG_PROPERTIES.HREF], propsList),\n    bodyAttributes: getAttributesFromPropsList(_HelmetConstants.ATTRIBUTE_NAMES.BODY, propsList),\n    defer: getInnermostProperty(propsList, _HelmetConstants.HELMET_PROPS.DEFER),\n    encode: getInnermostProperty(propsList, _HelmetConstants.HELMET_PROPS.ENCODE_SPECIAL_CHARACTERS),\n    htmlAttributes: getAttributesFromPropsList(_HelmetConstants.ATTRIBUTE_NAMES.HTML, propsList),\n    linkTags: getTagsFromPropsList(_HelmetConstants.TAG_NAMES.LINK, [_HelmetConstants.TAG_PROPERTIES.REL, _HelmetConstants.TAG_PROPERTIES.HREF], propsList),\n    metaTags: getTagsFromPropsList(_HelmetConstants.TAG_NAMES.META, [_HelmetConstants.TAG_PROPERTIES.NAME, _HelmetConstants.TAG_PROPERTIES.CHARSET, _HelmetConstants.TAG_PROPERTIES.HTTPEQUIV, _HelmetConstants.TAG_PROPERTIES.PROPERTY, _HelmetConstants.TAG_PROPERTIES.ITEM_PROP], propsList),\n    noscriptTags: getTagsFromPropsList(_HelmetConstants.TAG_NAMES.NOSCRIPT, [_HelmetConstants.TAG_PROPERTIES.INNER_HTML], propsList),\n    onChangeClientState: getOnChangeClientState(propsList),\n    scriptTags: getTagsFromPropsList(_HelmetConstants.TAG_NAMES.SCRIPT, [_HelmetConstants.TAG_PROPERTIES.SRC, _HelmetConstants.TAG_PROPERTIES.INNER_HTML], propsList),\n    styleTags: getTagsFromPropsList(_HelmetConstants.TAG_NAMES.STYLE, [_HelmetConstants.TAG_PROPERTIES.CSS_TEXT], propsList),\n    title: getTitleFromPropsList(propsList),\n    titleAttributes: getAttributesFromPropsList(_HelmetConstants.ATTRIBUTE_NAMES.TITLE, propsList)\n  };\n};\n\nvar rafPolyfill = function () {\n  var clock = Date.now();\n  return function (callback) {\n    var currentTime = Date.now();\n\n    if (currentTime - clock > 16) {\n      clock = currentTime;\n      callback(currentTime);\n    } else {\n      setTimeout(function () {\n        rafPolyfill(callback);\n      }, 0);\n    }\n  };\n}();\n\nvar cafPolyfill = function cafPolyfill(id) {\n  return clearTimeout(id);\n};\n\nvar requestAnimationFrame = typeof window !== \"undefined\" ? window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || rafPolyfill : global.requestAnimationFrame || rafPolyfill;\nvar cancelAnimationFrame = typeof window !== \"undefined\" ? window.cancelAnimationFrame || window.webkitCancelAnimationFrame || window.mozCancelAnimationFrame || cafPolyfill : global.cancelAnimationFrame || cafPolyfill;\n\nvar warn = function warn(msg) {\n  return console && typeof console.warn === \"function\" && console.warn(msg);\n};\n\nvar _helmetCallback = null;\n\nvar handleClientStateChange = function handleClientStateChange(newState) {\n  if (_helmetCallback) {\n    cancelAnimationFrame(_helmetCallback);\n  }\n\n  if (newState.defer) {\n    _helmetCallback = requestAnimationFrame(function () {\n      commitTagChanges(newState, function () {\n        _helmetCallback = null;\n      });\n    });\n  } else {\n    commitTagChanges(newState);\n    _helmetCallback = null;\n  }\n};\n\nvar commitTagChanges = function commitTagChanges(newState, cb) {\n  var baseTag = newState.baseTag,\n      bodyAttributes = newState.bodyAttributes,\n      htmlAttributes = newState.htmlAttributes,\n      linkTags = newState.linkTags,\n      metaTags = newState.metaTags,\n      noscriptTags = newState.noscriptTags,\n      onChangeClientState = newState.onChangeClientState,\n      scriptTags = newState.scriptTags,\n      styleTags = newState.styleTags,\n      title = newState.title,\n      titleAttributes = newState.titleAttributes;\n  updateAttributes(_HelmetConstants.TAG_NAMES.BODY, bodyAttributes);\n  updateAttributes(_HelmetConstants.TAG_NAMES.HTML, htmlAttributes);\n  updateTitle(title, titleAttributes);\n  var tagUpdates = {\n    baseTag: updateTags(_HelmetConstants.TAG_NAMES.BASE, baseTag),\n    linkTags: updateTags(_HelmetConstants.TAG_NAMES.LINK, linkTags),\n    metaTags: updateTags(_HelmetConstants.TAG_NAMES.META, metaTags),\n    noscriptTags: updateTags(_HelmetConstants.TAG_NAMES.NOSCRIPT, noscriptTags),\n    scriptTags: updateTags(_HelmetConstants.TAG_NAMES.SCRIPT, scriptTags),\n    styleTags: updateTags(_HelmetConstants.TAG_NAMES.STYLE, styleTags)\n  };\n  var addedTags = {};\n  var removedTags = {};\n  Object.keys(tagUpdates).forEach(function (tagType) {\n    var _tagUpdates$tagType = tagUpdates[tagType],\n        newTags = _tagUpdates$tagType.newTags,\n        oldTags = _tagUpdates$tagType.oldTags;\n\n    if (newTags.length) {\n      addedTags[tagType] = newTags;\n    }\n\n    if (oldTags.length) {\n      removedTags[tagType] = tagUpdates[tagType].oldTags;\n    }\n  });\n  cb && cb();\n  onChangeClientState(newState, addedTags, removedTags);\n};\n\nvar flattenArray = function flattenArray(possibleArray) {\n  return Array.isArray(possibleArray) ? possibleArray.join(\"\") : possibleArray;\n};\n\nvar updateTitle = function updateTitle(title, attributes) {\n  if (typeof title !== \"undefined\" && document.title !== title) {\n    document.title = flattenArray(title);\n  }\n\n  updateAttributes(_HelmetConstants.TAG_NAMES.TITLE, attributes);\n};\n\nvar updateAttributes = function updateAttributes(tagName, attributes) {\n  var elementTag = document.getElementsByTagName(tagName)[0];\n\n  if (!elementTag) {\n    return;\n  }\n\n  var helmetAttributeString = elementTag.getAttribute(_HelmetConstants.HELMET_ATTRIBUTE);\n  var helmetAttributes = helmetAttributeString ? helmetAttributeString.split(\",\") : [];\n  var attributesToRemove = [].concat(helmetAttributes);\n  var attributeKeys = Object.keys(attributes);\n\n  for (var i = 0; i < attributeKeys.length; i++) {\n    var attribute = attributeKeys[i];\n    var value = attributes[attribute] || \"\";\n\n    if (elementTag.getAttribute(attribute) !== value) {\n      elementTag.setAttribute(attribute, value);\n    }\n\n    if (helmetAttributes.indexOf(attribute) === -1) {\n      helmetAttributes.push(attribute);\n    }\n\n    var indexToSave = attributesToRemove.indexOf(attribute);\n\n    if (indexToSave !== -1) {\n      attributesToRemove.splice(indexToSave, 1);\n    }\n  }\n\n  for (var _i = attributesToRemove.length - 1; _i >= 0; _i--) {\n    elementTag.removeAttribute(attributesToRemove[_i]);\n  }\n\n  if (helmetAttributes.length === attributesToRemove.length) {\n    elementTag.removeAttribute(_HelmetConstants.HELMET_ATTRIBUTE);\n  } else if (elementTag.getAttribute(_HelmetConstants.HELMET_ATTRIBUTE) !== attributeKeys.join(\",\")) {\n    elementTag.setAttribute(_HelmetConstants.HELMET_ATTRIBUTE, attributeKeys.join(\",\"));\n  }\n};\n\nvar updateTags = function updateTags(type, tags) {\n  var headElement = document.head || document.querySelector(_HelmetConstants.TAG_NAMES.HEAD);\n  var tagNodes = headElement.querySelectorAll(type + \"[\" + _HelmetConstants.HELMET_ATTRIBUTE + \"]\");\n  var oldTags = Array.prototype.slice.call(tagNodes);\n  var newTags = [];\n  var indexToDelete = void 0;\n\n  if (tags && tags.length) {\n    tags.forEach(function (tag) {\n      var newElement = document.createElement(type);\n\n      for (var attribute in tag) {\n        if (tag.hasOwnProperty(attribute)) {\n          if (attribute === _HelmetConstants.TAG_PROPERTIES.INNER_HTML) {\n            newElement.innerHTML = tag.innerHTML;\n          } else if (attribute === _HelmetConstants.TAG_PROPERTIES.CSS_TEXT) {\n            if (newElement.styleSheet) {\n              newElement.styleSheet.cssText = tag.cssText;\n            } else {\n              newElement.appendChild(document.createTextNode(tag.cssText));\n            }\n          } else {\n            var value = typeof tag[attribute] === \"undefined\" ? \"\" : tag[attribute];\n            newElement.setAttribute(attribute, value);\n          }\n        }\n      }\n\n      newElement.setAttribute(_HelmetConstants.HELMET_ATTRIBUTE, \"true\"); // Remove a duplicate tag from domTagstoRemove, so it isn't cleared.\n\n      if (oldTags.some(function (existingTag, index) {\n        indexToDelete = index;\n        return newElement.isEqualNode(existingTag);\n      })) {\n        oldTags.splice(indexToDelete, 1);\n      } else {\n        newTags.push(newElement);\n      }\n    });\n  }\n\n  oldTags.forEach(function (tag) {\n    return tag.parentNode.removeChild(tag);\n  });\n  newTags.forEach(function (tag) {\n    return headElement.appendChild(tag);\n  });\n  return {\n    oldTags: oldTags,\n    newTags: newTags\n  };\n};\n\nvar generateElementAttributesAsString = function generateElementAttributesAsString(attributes) {\n  return Object.keys(attributes).reduce(function (str, key) {\n    var attr = typeof attributes[key] !== \"undefined\" ? key + \"=\\\"\" + attributes[key] + \"\\\"\" : \"\" + key;\n    return str ? str + \" \" + attr : attr;\n  }, \"\");\n};\n\nvar generateTitleAsString = function generateTitleAsString(type, title, attributes, encode) {\n  var attributeString = generateElementAttributesAsString(attributes);\n  var flattenedTitle = flattenArray(title);\n  return attributeString ? \"<\" + type + \" \" + _HelmetConstants.HELMET_ATTRIBUTE + \"=\\\"true\\\" \" + attributeString + \">\" + encodeSpecialCharacters(flattenedTitle, encode) + \"</\" + type + \">\" : \"<\" + type + \" \" + _HelmetConstants.HELMET_ATTRIBUTE + \"=\\\"true\\\">\" + encodeSpecialCharacters(flattenedTitle, encode) + \"</\" + type + \">\";\n};\n\nvar generateTagsAsString = function generateTagsAsString(type, tags, encode) {\n  return tags.reduce(function (str, tag) {\n    var attributeHtml = Object.keys(tag).filter(function (attribute) {\n      return !(attribute === _HelmetConstants.TAG_PROPERTIES.INNER_HTML || attribute === _HelmetConstants.TAG_PROPERTIES.CSS_TEXT);\n    }).reduce(function (string, attribute) {\n      var attr = typeof tag[attribute] === \"undefined\" ? attribute : attribute + \"=\\\"\" + encodeSpecialCharacters(tag[attribute], encode) + \"\\\"\";\n      return string ? string + \" \" + attr : attr;\n    }, \"\");\n    var tagContent = tag.innerHTML || tag.cssText || \"\";\n    var isSelfClosing = _HelmetConstants.SELF_CLOSING_TAGS.indexOf(type) === -1;\n    return str + \"<\" + type + \" \" + _HelmetConstants.HELMET_ATTRIBUTE + \"=\\\"true\\\" \" + attributeHtml + (isSelfClosing ? \"/>\" : \">\" + tagContent + \"</\" + type + \">\");\n  }, \"\");\n};\n\nvar convertElementAttributestoReactProps = function convertElementAttributestoReactProps(attributes) {\n  var initProps = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return Object.keys(attributes).reduce(function (obj, key) {\n    obj[_HelmetConstants.REACT_TAG_MAP[key] || key] = attributes[key];\n    return obj;\n  }, initProps);\n};\n\nvar convertReactPropstoHtmlAttributes = function convertReactPropstoHtmlAttributes(props) {\n  var initAttributes = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return Object.keys(props).reduce(function (obj, key) {\n    obj[_HelmetConstants.HTML_TAG_MAP[key] || key] = props[key];\n    return obj;\n  }, initAttributes);\n};\n\nvar generateTitleAsReactComponent = function generateTitleAsReactComponent(type, title, attributes) {\n  var _initProps; // assigning into an array to define toString function on it\n\n\n  var initProps = (_initProps = {\n    key: title\n  }, _initProps[_HelmetConstants.HELMET_ATTRIBUTE] = true, _initProps);\n  var props = convertElementAttributestoReactProps(attributes, initProps);\n  return [_react2.default.createElement(_HelmetConstants.TAG_NAMES.TITLE, props, title)];\n};\n\nvar generateTagsAsReactComponent = function generateTagsAsReactComponent(type, tags) {\n  return tags.map(function (tag, i) {\n    var _mappedTag;\n\n    var mappedTag = (_mappedTag = {\n      key: i\n    }, _mappedTag[_HelmetConstants.HELMET_ATTRIBUTE] = true, _mappedTag);\n    Object.keys(tag).forEach(function (attribute) {\n      var mappedAttribute = _HelmetConstants.REACT_TAG_MAP[attribute] || attribute;\n\n      if (mappedAttribute === _HelmetConstants.TAG_PROPERTIES.INNER_HTML || mappedAttribute === _HelmetConstants.TAG_PROPERTIES.CSS_TEXT) {\n        var content = tag.innerHTML || tag.cssText;\n        mappedTag.dangerouslySetInnerHTML = {\n          __html: content\n        };\n      } else {\n        mappedTag[mappedAttribute] = tag[attribute];\n      }\n    });\n    return _react2.default.createElement(type, mappedTag);\n  });\n};\n\nvar getMethodsForTag = function getMethodsForTag(type, tags, encode) {\n  switch (type) {\n    case _HelmetConstants.TAG_NAMES.TITLE:\n      return {\n        toComponent: function toComponent() {\n          return generateTitleAsReactComponent(type, tags.title, tags.titleAttributes, encode);\n        },\n        toString: function toString() {\n          return generateTitleAsString(type, tags.title, tags.titleAttributes, encode);\n        }\n      };\n\n    case _HelmetConstants.ATTRIBUTE_NAMES.BODY:\n    case _HelmetConstants.ATTRIBUTE_NAMES.HTML:\n      return {\n        toComponent: function toComponent() {\n          return convertElementAttributestoReactProps(tags);\n        },\n        toString: function toString() {\n          return generateElementAttributesAsString(tags);\n        }\n      };\n\n    default:\n      return {\n        toComponent: function toComponent() {\n          return generateTagsAsReactComponent(type, tags);\n        },\n        toString: function toString() {\n          return generateTagsAsString(type, tags, encode);\n        }\n      };\n  }\n};\n\nvar mapStateOnServer = function mapStateOnServer(_ref) {\n  var baseTag = _ref.baseTag,\n      bodyAttributes = _ref.bodyAttributes,\n      encode = _ref.encode,\n      htmlAttributes = _ref.htmlAttributes,\n      linkTags = _ref.linkTags,\n      metaTags = _ref.metaTags,\n      noscriptTags = _ref.noscriptTags,\n      scriptTags = _ref.scriptTags,\n      styleTags = _ref.styleTags,\n      _ref$title = _ref.title,\n      title = _ref$title === undefined ? \"\" : _ref$title,\n      titleAttributes = _ref.titleAttributes;\n  return {\n    base: getMethodsForTag(_HelmetConstants.TAG_NAMES.BASE, baseTag, encode),\n    bodyAttributes: getMethodsForTag(_HelmetConstants.ATTRIBUTE_NAMES.BODY, bodyAttributes, encode),\n    htmlAttributes: getMethodsForTag(_HelmetConstants.ATTRIBUTE_NAMES.HTML, htmlAttributes, encode),\n    link: getMethodsForTag(_HelmetConstants.TAG_NAMES.LINK, linkTags, encode),\n    meta: getMethodsForTag(_HelmetConstants.TAG_NAMES.META, metaTags, encode),\n    noscript: getMethodsForTag(_HelmetConstants.TAG_NAMES.NOSCRIPT, noscriptTags, encode),\n    script: getMethodsForTag(_HelmetConstants.TAG_NAMES.SCRIPT, scriptTags, encode),\n    style: getMethodsForTag(_HelmetConstants.TAG_NAMES.STYLE, styleTags, encode),\n    title: getMethodsForTag(_HelmetConstants.TAG_NAMES.TITLE, {\n      title: title,\n      titleAttributes: titleAttributes\n    }, encode)\n  };\n};\n\nexports.convertReactPropstoHtmlAttributes = convertReactPropstoHtmlAttributes;\nexports.handleClientStateChange = handleClientStateChange;\nexports.mapStateOnServer = mapStateOnServer;\nexports.reducePropsToState = reducePropsToState;\nexports.requestAnimationFrame = requestAnimationFrame;\nexports.warn = warn;","map":{"version":3,"sources":["/Users/gredu/Documents/react-marketplace/node_modules/react-helmet/lib/HelmetUtils.js"],"names":["exports","__esModule","warn","requestAnimationFrame","reducePropsToState","mapStateOnServer","handleClientStateChange","convertReactPropstoHtmlAttributes","undefined","_typeof","Symbol","iterator","obj","constructor","prototype","_extends","Object","assign","target","i","arguments","length","source","key","hasOwnProperty","call","_react","require","_react2","_interopRequireDefault","_objectAssign","_objectAssign2","_HelmetConstants","default","encodeSpecialCharacters","str","encode","String","replace","getTitleFromPropsList","propsList","innermostTitle","getInnermostProperty","TAG_NAMES","TITLE","innermostTemplate","HELMET_PROPS","TITLE_TEMPLATE","innermostDefaultTitle","DEFAULT_TITLE","getOnChangeClientState","ON_CHANGE_CLIENT_STATE","getAttributesFromPropsList","tagType","filter","props","map","reduce","tagAttrs","current","getBaseTagFromPropsList","primaryAttributes","BASE","reverse","innermostBaseTag","tag","keys","attributeKey","lowerCaseAttributeKey","toLowerCase","indexOf","concat","getTagsFromPropsList","tagName","approvedSeenTags","Array","isArray","approvedTags","instanceTags","instanceSeenTags","primaryAttributeKey","TAG_PROPERTIES","REL","INNER_HTML","CSS_TEXT","ITEM_PROP","value","forEach","push","tagUnion","property","baseTag","HREF","bodyAttributes","ATTRIBUTE_NAMES","BODY","defer","DEFER","ENCODE_SPECIAL_CHARACTERS","htmlAttributes","HTML","linkTags","LINK","metaTags","META","NAME","CHARSET","HTTPEQUIV","PROPERTY","noscriptTags","NOSCRIPT","onChangeClientState","scriptTags","SCRIPT","SRC","styleTags","STYLE","title","titleAttributes","rafPolyfill","clock","Date","now","callback","currentTime","setTimeout","cafPolyfill","id","clearTimeout","window","webkitRequestAnimationFrame","mozRequestAnimationFrame","global","cancelAnimationFrame","webkitCancelAnimationFrame","mozCancelAnimationFrame","msg","console","_helmetCallback","newState","commitTagChanges","cb","updateAttributes","updateTitle","tagUpdates","updateTags","addedTags","removedTags","_tagUpdates$tagType","newTags","oldTags","flattenArray","possibleArray","join","attributes","document","elementTag","getElementsByTagName","helmetAttributeString","getAttribute","HELMET_ATTRIBUTE","helmetAttributes","split","attributesToRemove","attributeKeys","attribute","setAttribute","indexToSave","splice","_i","removeAttribute","type","tags","headElement","head","querySelector","HEAD","tagNodes","querySelectorAll","slice","indexToDelete","newElement","createElement","innerHTML","styleSheet","cssText","appendChild","createTextNode","some","existingTag","index","isEqualNode","parentNode","removeChild","generateElementAttributesAsString","attr","generateTitleAsString","attributeString","flattenedTitle","generateTagsAsString","attributeHtml","string","tagContent","isSelfClosing","SELF_CLOSING_TAGS","convertElementAttributestoReactProps","initProps","REACT_TAG_MAP","initAttributes","HTML_TAG_MAP","generateTitleAsReactComponent","_initProps","generateTagsAsReactComponent","_mappedTag","mappedTag","mappedAttribute","content","dangerouslySetInnerHTML","__html","getMethodsForTag","toComponent","toString","_ref","_ref$title","base","link","meta","noscript","script","style"],"mappings":"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","sourcesContent":["exports.__esModule = true;\nexports.warn = exports.requestAnimationFrame = exports.reducePropsToState = exports.mapStateOnServer = exports.handleClientStateChange = exports.convertReactPropstoHtmlAttributes = undefined;\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _objectAssign = require(\"object-assign\");\n\nvar _objectAssign2 = _interopRequireDefault(_objectAssign);\n\nvar _HelmetConstants = require(\"./HelmetConstants.js\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar encodeSpecialCharacters = function encodeSpecialCharacters(str) {\n    var encode = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n\n    if (encode === false) {\n        return String(str);\n    }\n\n    return String(str).replace(/&/g, \"&amp;\").replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\").replace(/\"/g, \"&quot;\").replace(/'/g, \"&#x27;\");\n};\n\nvar getTitleFromPropsList = function getTitleFromPropsList(propsList) {\n    var innermostTitle = getInnermostProperty(propsList, _HelmetConstants.TAG_NAMES.TITLE);\n    var innermostTemplate = getInnermostProperty(propsList, _HelmetConstants.HELMET_PROPS.TITLE_TEMPLATE);\n\n    if (innermostTemplate && innermostTitle) {\n        // use function arg to avoid need to escape $ characters\n        return innermostTemplate.replace(/%s/g, function () {\n            return innermostTitle;\n        });\n    }\n\n    var innermostDefaultTitle = getInnermostProperty(propsList, _HelmetConstants.HELMET_PROPS.DEFAULT_TITLE);\n\n    return innermostTitle || innermostDefaultTitle || undefined;\n};\n\nvar getOnChangeClientState = function getOnChangeClientState(propsList) {\n    return getInnermostProperty(propsList, _HelmetConstants.HELMET_PROPS.ON_CHANGE_CLIENT_STATE) || function () {};\n};\n\nvar getAttributesFromPropsList = function getAttributesFromPropsList(tagType, propsList) {\n    return propsList.filter(function (props) {\n        return typeof props[tagType] !== \"undefined\";\n    }).map(function (props) {\n        return props[tagType];\n    }).reduce(function (tagAttrs, current) {\n        return _extends({}, tagAttrs, current);\n    }, {});\n};\n\nvar getBaseTagFromPropsList = function getBaseTagFromPropsList(primaryAttributes, propsList) {\n    return propsList.filter(function (props) {\n        return typeof props[_HelmetConstants.TAG_NAMES.BASE] !== \"undefined\";\n    }).map(function (props) {\n        return props[_HelmetConstants.TAG_NAMES.BASE];\n    }).reverse().reduce(function (innermostBaseTag, tag) {\n        if (!innermostBaseTag.length) {\n            var keys = Object.keys(tag);\n\n            for (var i = 0; i < keys.length; i++) {\n                var attributeKey = keys[i];\n                var lowerCaseAttributeKey = attributeKey.toLowerCase();\n\n                if (primaryAttributes.indexOf(lowerCaseAttributeKey) !== -1 && tag[lowerCaseAttributeKey]) {\n                    return innermostBaseTag.concat(tag);\n                }\n            }\n        }\n\n        return innermostBaseTag;\n    }, []);\n};\n\nvar getTagsFromPropsList = function getTagsFromPropsList(tagName, primaryAttributes, propsList) {\n    // Calculate list of tags, giving priority innermost component (end of the propslist)\n    var approvedSeenTags = {};\n\n    return propsList.filter(function (props) {\n        if (Array.isArray(props[tagName])) {\n            return true;\n        }\n        if (typeof props[tagName] !== \"undefined\") {\n            warn(\"Helmet: \" + tagName + \" should be of type \\\"Array\\\". Instead found type \\\"\" + _typeof(props[tagName]) + \"\\\"\");\n        }\n        return false;\n    }).map(function (props) {\n        return props[tagName];\n    }).reverse().reduce(function (approvedTags, instanceTags) {\n        var instanceSeenTags = {};\n\n        instanceTags.filter(function (tag) {\n            var primaryAttributeKey = void 0;\n            var keys = Object.keys(tag);\n            for (var i = 0; i < keys.length; i++) {\n                var attributeKey = keys[i];\n                var lowerCaseAttributeKey = attributeKey.toLowerCase();\n\n                // Special rule with link tags, since rel and href are both primary tags, rel takes priority\n                if (primaryAttributes.indexOf(lowerCaseAttributeKey) !== -1 && !(primaryAttributeKey === _HelmetConstants.TAG_PROPERTIES.REL && tag[primaryAttributeKey].toLowerCase() === \"canonical\") && !(lowerCaseAttributeKey === _HelmetConstants.TAG_PROPERTIES.REL && tag[lowerCaseAttributeKey].toLowerCase() === \"stylesheet\")) {\n                    primaryAttributeKey = lowerCaseAttributeKey;\n                }\n                // Special case for innerHTML which doesn't work lowercased\n                if (primaryAttributes.indexOf(attributeKey) !== -1 && (attributeKey === _HelmetConstants.TAG_PROPERTIES.INNER_HTML || attributeKey === _HelmetConstants.TAG_PROPERTIES.CSS_TEXT || attributeKey === _HelmetConstants.TAG_PROPERTIES.ITEM_PROP)) {\n                    primaryAttributeKey = attributeKey;\n                }\n            }\n\n            if (!primaryAttributeKey || !tag[primaryAttributeKey]) {\n                return false;\n            }\n\n            var value = tag[primaryAttributeKey].toLowerCase();\n\n            if (!approvedSeenTags[primaryAttributeKey]) {\n                approvedSeenTags[primaryAttributeKey] = {};\n            }\n\n            if (!instanceSeenTags[primaryAttributeKey]) {\n                instanceSeenTags[primaryAttributeKey] = {};\n            }\n\n            if (!approvedSeenTags[primaryAttributeKey][value]) {\n                instanceSeenTags[primaryAttributeKey][value] = true;\n                return true;\n            }\n\n            return false;\n        }).reverse().forEach(function (tag) {\n            return approvedTags.push(tag);\n        });\n\n        // Update seen tags with tags from this instance\n        var keys = Object.keys(instanceSeenTags);\n        for (var i = 0; i < keys.length; i++) {\n            var attributeKey = keys[i];\n            var tagUnion = (0, _objectAssign2.default)({}, approvedSeenTags[attributeKey], instanceSeenTags[attributeKey]);\n\n            approvedSeenTags[attributeKey] = tagUnion;\n        }\n\n        return approvedTags;\n    }, []).reverse();\n};\n\nvar getInnermostProperty = function getInnermostProperty(propsList, property) {\n    for (var i = propsList.length - 1; i >= 0; i--) {\n        var props = propsList[i];\n\n        if (props.hasOwnProperty(property)) {\n            return props[property];\n        }\n    }\n\n    return null;\n};\n\nvar reducePropsToState = function reducePropsToState(propsList) {\n    return {\n        baseTag: getBaseTagFromPropsList([_HelmetConstants.TAG_PROPERTIES.HREF], propsList),\n        bodyAttributes: getAttributesFromPropsList(_HelmetConstants.ATTRIBUTE_NAMES.BODY, propsList),\n        defer: getInnermostProperty(propsList, _HelmetConstants.HELMET_PROPS.DEFER),\n        encode: getInnermostProperty(propsList, _HelmetConstants.HELMET_PROPS.ENCODE_SPECIAL_CHARACTERS),\n        htmlAttributes: getAttributesFromPropsList(_HelmetConstants.ATTRIBUTE_NAMES.HTML, propsList),\n        linkTags: getTagsFromPropsList(_HelmetConstants.TAG_NAMES.LINK, [_HelmetConstants.TAG_PROPERTIES.REL, _HelmetConstants.TAG_PROPERTIES.HREF], propsList),\n        metaTags: getTagsFromPropsList(_HelmetConstants.TAG_NAMES.META, [_HelmetConstants.TAG_PROPERTIES.NAME, _HelmetConstants.TAG_PROPERTIES.CHARSET, _HelmetConstants.TAG_PROPERTIES.HTTPEQUIV, _HelmetConstants.TAG_PROPERTIES.PROPERTY, _HelmetConstants.TAG_PROPERTIES.ITEM_PROP], propsList),\n        noscriptTags: getTagsFromPropsList(_HelmetConstants.TAG_NAMES.NOSCRIPT, [_HelmetConstants.TAG_PROPERTIES.INNER_HTML], propsList),\n        onChangeClientState: getOnChangeClientState(propsList),\n        scriptTags: getTagsFromPropsList(_HelmetConstants.TAG_NAMES.SCRIPT, [_HelmetConstants.TAG_PROPERTIES.SRC, _HelmetConstants.TAG_PROPERTIES.INNER_HTML], propsList),\n        styleTags: getTagsFromPropsList(_HelmetConstants.TAG_NAMES.STYLE, [_HelmetConstants.TAG_PROPERTIES.CSS_TEXT], propsList),\n        title: getTitleFromPropsList(propsList),\n        titleAttributes: getAttributesFromPropsList(_HelmetConstants.ATTRIBUTE_NAMES.TITLE, propsList)\n    };\n};\n\nvar rafPolyfill = function () {\n    var clock = Date.now();\n\n    return function (callback) {\n        var currentTime = Date.now();\n\n        if (currentTime - clock > 16) {\n            clock = currentTime;\n            callback(currentTime);\n        } else {\n            setTimeout(function () {\n                rafPolyfill(callback);\n            }, 0);\n        }\n    };\n}();\n\nvar cafPolyfill = function cafPolyfill(id) {\n    return clearTimeout(id);\n};\n\nvar requestAnimationFrame = typeof window !== \"undefined\" ? window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || rafPolyfill : global.requestAnimationFrame || rafPolyfill;\n\nvar cancelAnimationFrame = typeof window !== \"undefined\" ? window.cancelAnimationFrame || window.webkitCancelAnimationFrame || window.mozCancelAnimationFrame || cafPolyfill : global.cancelAnimationFrame || cafPolyfill;\n\nvar warn = function warn(msg) {\n    return console && typeof console.warn === \"function\" && console.warn(msg);\n};\n\nvar _helmetCallback = null;\n\nvar handleClientStateChange = function handleClientStateChange(newState) {\n    if (_helmetCallback) {\n        cancelAnimationFrame(_helmetCallback);\n    }\n\n    if (newState.defer) {\n        _helmetCallback = requestAnimationFrame(function () {\n            commitTagChanges(newState, function () {\n                _helmetCallback = null;\n            });\n        });\n    } else {\n        commitTagChanges(newState);\n        _helmetCallback = null;\n    }\n};\n\nvar commitTagChanges = function commitTagChanges(newState, cb) {\n    var baseTag = newState.baseTag,\n        bodyAttributes = newState.bodyAttributes,\n        htmlAttributes = newState.htmlAttributes,\n        linkTags = newState.linkTags,\n        metaTags = newState.metaTags,\n        noscriptTags = newState.noscriptTags,\n        onChangeClientState = newState.onChangeClientState,\n        scriptTags = newState.scriptTags,\n        styleTags = newState.styleTags,\n        title = newState.title,\n        titleAttributes = newState.titleAttributes;\n\n    updateAttributes(_HelmetConstants.TAG_NAMES.BODY, bodyAttributes);\n    updateAttributes(_HelmetConstants.TAG_NAMES.HTML, htmlAttributes);\n\n    updateTitle(title, titleAttributes);\n\n    var tagUpdates = {\n        baseTag: updateTags(_HelmetConstants.TAG_NAMES.BASE, baseTag),\n        linkTags: updateTags(_HelmetConstants.TAG_NAMES.LINK, linkTags),\n        metaTags: updateTags(_HelmetConstants.TAG_NAMES.META, metaTags),\n        noscriptTags: updateTags(_HelmetConstants.TAG_NAMES.NOSCRIPT, noscriptTags),\n        scriptTags: updateTags(_HelmetConstants.TAG_NAMES.SCRIPT, scriptTags),\n        styleTags: updateTags(_HelmetConstants.TAG_NAMES.STYLE, styleTags)\n    };\n\n    var addedTags = {};\n    var removedTags = {};\n\n    Object.keys(tagUpdates).forEach(function (tagType) {\n        var _tagUpdates$tagType = tagUpdates[tagType],\n            newTags = _tagUpdates$tagType.newTags,\n            oldTags = _tagUpdates$tagType.oldTags;\n\n\n        if (newTags.length) {\n            addedTags[tagType] = newTags;\n        }\n        if (oldTags.length) {\n            removedTags[tagType] = tagUpdates[tagType].oldTags;\n        }\n    });\n\n    cb && cb();\n\n    onChangeClientState(newState, addedTags, removedTags);\n};\n\nvar flattenArray = function flattenArray(possibleArray) {\n    return Array.isArray(possibleArray) ? possibleArray.join(\"\") : possibleArray;\n};\n\nvar updateTitle = function updateTitle(title, attributes) {\n    if (typeof title !== \"undefined\" && document.title !== title) {\n        document.title = flattenArray(title);\n    }\n\n    updateAttributes(_HelmetConstants.TAG_NAMES.TITLE, attributes);\n};\n\nvar updateAttributes = function updateAttributes(tagName, attributes) {\n    var elementTag = document.getElementsByTagName(tagName)[0];\n\n    if (!elementTag) {\n        return;\n    }\n\n    var helmetAttributeString = elementTag.getAttribute(_HelmetConstants.HELMET_ATTRIBUTE);\n    var helmetAttributes = helmetAttributeString ? helmetAttributeString.split(\",\") : [];\n    var attributesToRemove = [].concat(helmetAttributes);\n    var attributeKeys = Object.keys(attributes);\n\n    for (var i = 0; i < attributeKeys.length; i++) {\n        var attribute = attributeKeys[i];\n        var value = attributes[attribute] || \"\";\n\n        if (elementTag.getAttribute(attribute) !== value) {\n            elementTag.setAttribute(attribute, value);\n        }\n\n        if (helmetAttributes.indexOf(attribute) === -1) {\n            helmetAttributes.push(attribute);\n        }\n\n        var indexToSave = attributesToRemove.indexOf(attribute);\n        if (indexToSave !== -1) {\n            attributesToRemove.splice(indexToSave, 1);\n        }\n    }\n\n    for (var _i = attributesToRemove.length - 1; _i >= 0; _i--) {\n        elementTag.removeAttribute(attributesToRemove[_i]);\n    }\n\n    if (helmetAttributes.length === attributesToRemove.length) {\n        elementTag.removeAttribute(_HelmetConstants.HELMET_ATTRIBUTE);\n    } else if (elementTag.getAttribute(_HelmetConstants.HELMET_ATTRIBUTE) !== attributeKeys.join(\",\")) {\n        elementTag.setAttribute(_HelmetConstants.HELMET_ATTRIBUTE, attributeKeys.join(\",\"));\n    }\n};\n\nvar updateTags = function updateTags(type, tags) {\n    var headElement = document.head || document.querySelector(_HelmetConstants.TAG_NAMES.HEAD);\n    var tagNodes = headElement.querySelectorAll(type + \"[\" + _HelmetConstants.HELMET_ATTRIBUTE + \"]\");\n    var oldTags = Array.prototype.slice.call(tagNodes);\n    var newTags = [];\n    var indexToDelete = void 0;\n\n    if (tags && tags.length) {\n        tags.forEach(function (tag) {\n            var newElement = document.createElement(type);\n\n            for (var attribute in tag) {\n                if (tag.hasOwnProperty(attribute)) {\n                    if (attribute === _HelmetConstants.TAG_PROPERTIES.INNER_HTML) {\n                        newElement.innerHTML = tag.innerHTML;\n                    } else if (attribute === _HelmetConstants.TAG_PROPERTIES.CSS_TEXT) {\n                        if (newElement.styleSheet) {\n                            newElement.styleSheet.cssText = tag.cssText;\n                        } else {\n                            newElement.appendChild(document.createTextNode(tag.cssText));\n                        }\n                    } else {\n                        var value = typeof tag[attribute] === \"undefined\" ? \"\" : tag[attribute];\n                        newElement.setAttribute(attribute, value);\n                    }\n                }\n            }\n\n            newElement.setAttribute(_HelmetConstants.HELMET_ATTRIBUTE, \"true\");\n\n            // Remove a duplicate tag from domTagstoRemove, so it isn't cleared.\n            if (oldTags.some(function (existingTag, index) {\n                indexToDelete = index;\n                return newElement.isEqualNode(existingTag);\n            })) {\n                oldTags.splice(indexToDelete, 1);\n            } else {\n                newTags.push(newElement);\n            }\n        });\n    }\n\n    oldTags.forEach(function (tag) {\n        return tag.parentNode.removeChild(tag);\n    });\n    newTags.forEach(function (tag) {\n        return headElement.appendChild(tag);\n    });\n\n    return {\n        oldTags: oldTags,\n        newTags: newTags\n    };\n};\n\nvar generateElementAttributesAsString = function generateElementAttributesAsString(attributes) {\n    return Object.keys(attributes).reduce(function (str, key) {\n        var attr = typeof attributes[key] !== \"undefined\" ? key + \"=\\\"\" + attributes[key] + \"\\\"\" : \"\" + key;\n        return str ? str + \" \" + attr : attr;\n    }, \"\");\n};\n\nvar generateTitleAsString = function generateTitleAsString(type, title, attributes, encode) {\n    var attributeString = generateElementAttributesAsString(attributes);\n    var flattenedTitle = flattenArray(title);\n    return attributeString ? \"<\" + type + \" \" + _HelmetConstants.HELMET_ATTRIBUTE + \"=\\\"true\\\" \" + attributeString + \">\" + encodeSpecialCharacters(flattenedTitle, encode) + \"</\" + type + \">\" : \"<\" + type + \" \" + _HelmetConstants.HELMET_ATTRIBUTE + \"=\\\"true\\\">\" + encodeSpecialCharacters(flattenedTitle, encode) + \"</\" + type + \">\";\n};\n\nvar generateTagsAsString = function generateTagsAsString(type, tags, encode) {\n    return tags.reduce(function (str, tag) {\n        var attributeHtml = Object.keys(tag).filter(function (attribute) {\n            return !(attribute === _HelmetConstants.TAG_PROPERTIES.INNER_HTML || attribute === _HelmetConstants.TAG_PROPERTIES.CSS_TEXT);\n        }).reduce(function (string, attribute) {\n            var attr = typeof tag[attribute] === \"undefined\" ? attribute : attribute + \"=\\\"\" + encodeSpecialCharacters(tag[attribute], encode) + \"\\\"\";\n            return string ? string + \" \" + attr : attr;\n        }, \"\");\n\n        var tagContent = tag.innerHTML || tag.cssText || \"\";\n\n        var isSelfClosing = _HelmetConstants.SELF_CLOSING_TAGS.indexOf(type) === -1;\n\n        return str + \"<\" + type + \" \" + _HelmetConstants.HELMET_ATTRIBUTE + \"=\\\"true\\\" \" + attributeHtml + (isSelfClosing ? \"/>\" : \">\" + tagContent + \"</\" + type + \">\");\n    }, \"\");\n};\n\nvar convertElementAttributestoReactProps = function convertElementAttributestoReactProps(attributes) {\n    var initProps = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    return Object.keys(attributes).reduce(function (obj, key) {\n        obj[_HelmetConstants.REACT_TAG_MAP[key] || key] = attributes[key];\n        return obj;\n    }, initProps);\n};\n\nvar convertReactPropstoHtmlAttributes = function convertReactPropstoHtmlAttributes(props) {\n    var initAttributes = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    return Object.keys(props).reduce(function (obj, key) {\n        obj[_HelmetConstants.HTML_TAG_MAP[key] || key] = props[key];\n        return obj;\n    }, initAttributes);\n};\n\nvar generateTitleAsReactComponent = function generateTitleAsReactComponent(type, title, attributes) {\n    var _initProps;\n\n    // assigning into an array to define toString function on it\n    var initProps = (_initProps = {\n        key: title\n    }, _initProps[_HelmetConstants.HELMET_ATTRIBUTE] = true, _initProps);\n    var props = convertElementAttributestoReactProps(attributes, initProps);\n\n    return [_react2.default.createElement(_HelmetConstants.TAG_NAMES.TITLE, props, title)];\n};\n\nvar generateTagsAsReactComponent = function generateTagsAsReactComponent(type, tags) {\n    return tags.map(function (tag, i) {\n        var _mappedTag;\n\n        var mappedTag = (_mappedTag = {\n            key: i\n        }, _mappedTag[_HelmetConstants.HELMET_ATTRIBUTE] = true, _mappedTag);\n\n        Object.keys(tag).forEach(function (attribute) {\n            var mappedAttribute = _HelmetConstants.REACT_TAG_MAP[attribute] || attribute;\n\n            if (mappedAttribute === _HelmetConstants.TAG_PROPERTIES.INNER_HTML || mappedAttribute === _HelmetConstants.TAG_PROPERTIES.CSS_TEXT) {\n                var content = tag.innerHTML || tag.cssText;\n                mappedTag.dangerouslySetInnerHTML = { __html: content };\n            } else {\n                mappedTag[mappedAttribute] = tag[attribute];\n            }\n        });\n\n        return _react2.default.createElement(type, mappedTag);\n    });\n};\n\nvar getMethodsForTag = function getMethodsForTag(type, tags, encode) {\n    switch (type) {\n        case _HelmetConstants.TAG_NAMES.TITLE:\n            return {\n                toComponent: function toComponent() {\n                    return generateTitleAsReactComponent(type, tags.title, tags.titleAttributes, encode);\n                },\n                toString: function toString() {\n                    return generateTitleAsString(type, tags.title, tags.titleAttributes, encode);\n                }\n            };\n        case _HelmetConstants.ATTRIBUTE_NAMES.BODY:\n        case _HelmetConstants.ATTRIBUTE_NAMES.HTML:\n            return {\n                toComponent: function toComponent() {\n                    return convertElementAttributestoReactProps(tags);\n                },\n                toString: function toString() {\n                    return generateElementAttributesAsString(tags);\n                }\n            };\n        default:\n            return {\n                toComponent: function toComponent() {\n                    return generateTagsAsReactComponent(type, tags);\n                },\n                toString: function toString() {\n                    return generateTagsAsString(type, tags, encode);\n                }\n            };\n    }\n};\n\nvar mapStateOnServer = function mapStateOnServer(_ref) {\n    var baseTag = _ref.baseTag,\n        bodyAttributes = _ref.bodyAttributes,\n        encode = _ref.encode,\n        htmlAttributes = _ref.htmlAttributes,\n        linkTags = _ref.linkTags,\n        metaTags = _ref.metaTags,\n        noscriptTags = _ref.noscriptTags,\n        scriptTags = _ref.scriptTags,\n        styleTags = _ref.styleTags,\n        _ref$title = _ref.title,\n        title = _ref$title === undefined ? \"\" : _ref$title,\n        titleAttributes = _ref.titleAttributes;\n    return {\n        base: getMethodsForTag(_HelmetConstants.TAG_NAMES.BASE, baseTag, encode),\n        bodyAttributes: getMethodsForTag(_HelmetConstants.ATTRIBUTE_NAMES.BODY, bodyAttributes, encode),\n        htmlAttributes: getMethodsForTag(_HelmetConstants.ATTRIBUTE_NAMES.HTML, htmlAttributes, encode),\n        link: getMethodsForTag(_HelmetConstants.TAG_NAMES.LINK, linkTags, encode),\n        meta: getMethodsForTag(_HelmetConstants.TAG_NAMES.META, metaTags, encode),\n        noscript: getMethodsForTag(_HelmetConstants.TAG_NAMES.NOSCRIPT, noscriptTags, encode),\n        script: getMethodsForTag(_HelmetConstants.TAG_NAMES.SCRIPT, scriptTags, encode),\n        style: getMethodsForTag(_HelmetConstants.TAG_NAMES.STYLE, styleTags, encode),\n        title: getMethodsForTag(_HelmetConstants.TAG_NAMES.TITLE, { title: title, titleAttributes: titleAttributes }, encode)\n    };\n};\n\nexports.convertReactPropstoHtmlAttributes = convertReactPropstoHtmlAttributes;\nexports.handleClientStateChange = handleClientStateChange;\nexports.mapStateOnServer = mapStateOnServer;\nexports.reducePropsToState = reducePropsToState;\nexports.requestAnimationFrame = requestAnimationFrame;\nexports.warn = warn;"]},"metadata":{},"sourceType":"script"}